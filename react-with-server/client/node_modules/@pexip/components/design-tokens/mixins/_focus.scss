@use 'sass:map';
@import '../variables.scss';

@mixin box-shadow-focus($paramMap: ()) {
    $defaults: (
        color-scheme: 'dark',
        is-inset: true,
        additional-selector: null,
    );
    $opts: map-merge($defaults, $paramMap);
    $color-scheme: map.get($opts, 'color-scheme');
    $is-inset: map.get($opts, 'is-inset');
    $additional-selector: map.get($opts, 'additional-selector');

    @include create-token(
        dark-box-shadow-focus,
        rgba(color-hex('green-40'), 0.3)
    );
    @include create-token(dark-box-shadow-focus-border, color('green-100'));

    @include create-token(light-box-shadow-focus, color('green-40'));
    @include create-token(light-box-shadow-focus-border, color('green-100'));

    &,
    &:focus {
        transition: box-shadow 0.3s;
        outline: transparent;
    }

    &[data-focus-visible-added],
    #{$additional-selector} {
        @if $is-inset {
            box-shadow:
                0
                    0
                    0
                    1px
                    inset
                    get-token(#{$color-scheme}-box-shadow-focus-border),
                0
                    0
                    0
                    3px
                    get-token(#{$color-scheme}-box-shadow-focus) !important;
        } @else {
            box-shadow:
                0 0 0 1px get-token(#{$color-scheme}-box-shadow-focus-border),
                0
                    0
                    0
                    4px
                    get-token(#{$color-scheme}-box-shadow-focus) !important;
        }
    }
}
